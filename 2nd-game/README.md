# ⚔️ 天空之城 — 勇者冒險

一款使用 Pygame 打造的**無限捲軸平台跳躍遊戲**。  
勇者在漂浮於天空中的石橋上奔跑、跳躍、斬殺魔物，挑戰最遠距離！

> 🎨 不使用任何外部素材，所有視覺效果皆由 Pygame 內建繪圖功能（矩形、橢圓、多邊形）實現。

---

## 🎮 操作方式

| 按鍵 | 功能 |
|---|---|
| `←` `→` | 左右移動 |
| `Space` | 跳躍（僅限站在平台上時） |
| `Shift`（按住） | 衝刺（消耗體力） |
| `Z` | 揮刀發射劍氣 |
| 任意鍵 | Game Over 後重新開始 |

---

## 🕹️ 遊戲機制

### 🏃 移動與衝刺
- 方向鍵控制左右移動，空白鍵跳躍
- 按住 **Shift** 進入衝刺模式，速度大幅提升但消耗體力
- **空中慣性**：衝刺中起跳後放開 Shift，仍維持衝刺速度直到落地

### ⚔️ 劍氣攻擊
- 按 **Z** 揮刀發射水平劍氣波（淡藍白發光特效）
- 劍氣命中敵人可將其消滅，每隻 +50 分
- 攻擊有短暫冷卻時間（約 0.3 秒）

### 👾 敵人
- 紫色魔物會在石橋平台上左右巡邏
- 碰到勇者會造成傷害（受傷後有 1.5 秒無敵時間）
- 隨遊戲進行持續在前方平台上生成

### ❤️ 血量與體力
- **5 顆愛心**：被敵人碰到扣 1 顆，歸零則 Game Over
- **體力條**：衝刺消耗，停止後自動回復
  - 🟢 綠色 > 50% ｜ 🟡 黃色 > 25% ｜ 🔴 紅色 ≤ 25%

### 💀 Game Over
- 掉出畫面底部，或血量歸零
- 顯示最終分數，按任意鍵重新開始

---

## 🌤️ 視覺特色

- **漸層天空** — 深藍到淺白藍的天空之城氛圍
- **視差雲朵** — 多層雲朵以不同速度飄動，營造深度感
- **遠景浮島** — 帶有小城堡剪影的浮島慢速捲動
- **石橋平台** — 灰色石磚紋理、橋頭柱、青苔點綴
- **勇者角色** — 棕髮藍衣紅披風，持劍造型，奔跑動畫
- **衝刺特效** — 殘影、揚塵粒子、身體前傾
- **劍氣特效** — 發光橢圓 + 揮刀弧形動畫
- **敵人設計** — 紫色雙角魔物，紅色發光眼，浮動待機動畫

---

## 🛠️ 環境設置

### 前置需求
- Python 3.x（建議由 `asdf` 管理）
- [uv](https://github.com/astral-sh/uv) 套件管理器

### 安裝與執行

```bash
# 進入專案目錄
cd 2nd-game

# 初始化專案（已完成可跳過）
uv init

# 安裝依賴
uv add pygame-ce

# 啟動遊戲
uv run python main.py
```

---

## 📁 專案結構

```
2nd-game/
├── main.py          # 遊戲全部程式碼（單檔）
├── pyproject.toml   # uv 專案設定與依賴
├── uv.lock          # 依賴鎖定檔
└── README.md        # 本文件
```

---

## 📐 程式碼架構

所有邏輯集中在 `main.py`，結構如下：

| 區塊 | 說明 |
|---|---|
| 常數設定 | 螢幕大小、顏色、物理參數、敵人/劍氣設定 |
| `Platform` | 石橋平台，含磚縫紋理與青苔 |
| `SlashProjectile` | 劍氣投射物，發光飛行動畫 |
| `Enemy` | 紫色魔物，巡邏 AI + 死亡動畫 |
| `Player` | 勇者角色：移動、跳躍、衝刺、攻擊、HP、動畫 |
| `generate_platform()` | 隨機生成新平台 |
| `main()` | 遊戲主迴圈（事件 → 更新 → 繪製） |
